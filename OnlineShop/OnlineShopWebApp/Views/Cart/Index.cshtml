@model Cart;

@if (Model == null)
{
	<div class="text-center">
		<h3 class="bg-warning-subtle text-emphasis-warning">В корзине еще нет товаров</h3>
		<a class="btn btn-primary" asp-controller="home" asp-action="index">Перейти к покупкам</a>
	</div>
}
else
{
	<h4>Корзина</h4>
	<div class="row">
		<div class="col">
			<table class="table">
				<thead>
					<tr>
						<th class="col-4">Название</th>
						<th class="col-1"></th>
						<th class="col-2">Цена</th>
						<th class="col-2">Количество</th>
						<th class="col-2 text-end">Сумма</th>
					</tr>
				</thead>
				<tbody>
					@foreach (var item in Model.Items)
					{
						<tr>
							<td>
								<a style="color:navy" asp-controller="product" asp-action="index" asp-route-productid="@item.Product.Id"><p>@item.Product.Name</p></a>
							</td>
							<td><img class="img-fluid col-6 text-start" src="@item.Product.ImagePath"></td>
							<td>@string.Format("{0:### ### ###}", item.Product.Cost) р</td>
							<td>
								@item.Quantity
								<a class="btn btn-outline-secondary btn-sm" style="border-radius: 50px" asp-controller="cart" asp-action="add" asp-route-productid="@item.Product.Id">+</a>
								<a class="btn btn-outline-secondary btn-sm" style="border-radius: 50px" asp-controller="cart" asp-action="decreaseAmount" asp-route-productid="@item.Product.Id">-</a>
							</td>
							<td class="text-end">@string.Format("{0:### ### ###}", item.Amount) р</td>
						</tr>
					}
				</tbody>
			</table>
			<div class="text-end">
				<h4>Итого: @string.Format("{0:### ### ###}", Model.Cost) р</h4>
			</div>
			<div class="text-center">
				<a class="btn btn-primary" asp-controller="home" asp-action="index"><i class="bi bi-arrow-90deg-left"> Продолжить покупки</i></a>
				<a class="btn btn-outline-success" asp-controller="order" asp-action="index"><i class="bi bi-check-circle-fill"> Перейти к оформлению</i></a>
				<!-- Кнопка-триггер модального окна -->
				<button type="button" class="btn btn-outline-danger" data-bs-toggle="modal" data-bs-target="#exampleModal">
					<i class="bi bi-x-circle"> Очистить корзину </i>
				</button>				
			</div>
		</div>
	</div>
}

<!-- Модальное окно -->
<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<h1 class="modal-title fs-5" id="exampleModalLabel">Очистка корзины</h1>
				<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Закрыть"></button>
			</div>
			<div class="modal-body">
				Вы уверены, что хотите очистить корзину?
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Отмена</button>
				<a type="button" class="btn btn-primary" asp-controller="cart" asp-action="clear">Очистить</a>
			</div>
		</div>
	</div>
</div>